<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        
        <meta name="HandheldFriendly" content="true" />
        <meta name="MobileOptimized" content="320" /> -->
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, width=device-width" />

        <!-- , user-scalable=no"  -->

        <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> -->

        <!-- Link to style sheet -->
        <link rel="stylesheet" href="css/counter.css" />
        <!-- Title -->
        <title>Japanese Currency Counter</title>
    </head>
    <body>
        <main>
            <!-- Main Grid -->
            <div class="mainGrid">
                <!-- Top Row -->
                <div class="totalsRow">
                    <!-- Clear Button -->
                    <button id="clearButton">Clear 1.15</button>
                    <!-- Total Value -->
                    <span id="totalValueContainer">Total:￥0</span>
                </div>
                <!-- Money Buttons -->
                <div class="currenciesGrid">
                    <!-- Top Row -->
                    <div id="currencyHeader" class="currencyRow">
                        <!-- Minus Button -->
                        <span class="smallColName"><p>Minus 1</p></span>
                        <!-- ￥1 image -->
                        <span></span>
                        <!-- Plus Button -->
                        <span class="smallColName"><p>Plus 1</p></span>
                        <!-- ￥1 Count -->
                        <span class="colName"><p>Count</p></span>
                        <!-- ￥1 Total -->
                        <span class="colName"><p>Total</p></span>
                    </div>
                    <!-- ￥1 Row -->
                    <div id="yen1" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen1MinusButton" class="minusButton">
                            <p>-</p>
                        </button>
                        
                        <!-- ￥1 image -->
                        <img src="images/currency/yen1.jpg" alt="￥1" />
                        <!-- Plus Button -->
                        <button id="yen1PlusButton" class="plusButton">
                            <p>+</p>
                        </button>
                        
                        <!-- ￥1 Count -->
                        <span id="yen1CountContainer" class="currencyCountContainer">
                            0
                        </span>
                        
                        
                        <!-- ￥1 Total -->
                        <span id="yen1TotalValueContainer" class="currencyTotal">
                            0
                        </span>
                        
                        
                    </div>

                    <!-- ￥5 Row -->
                    <div id="yen5" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen5MinusButton" class="minusButton">-</button>
                        <!-- ￥5 image -->
                        <img src="images/currency/yen5.jpg" alt="￥5" />
                        <!-- Plus Button -->
                        <button id="yen5PlusButton" class="plusButton">+</button>
                        <!-- ￥5 Count -->
                        <span id="yen5CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥5 Total -->
                        <span id="yen5TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥10 Row -->
                    <div id="yen10" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen10MinusButton" class="minusButton">-</button>
                        <!-- ￥10 image -->
                        <img src="images/currency/yen10.jpg" alt="￥10" />
                        
                        <!-- Plus Button -->
                        <button id="yen10PlusButton" class="plusButton">+</button>
                        <!-- ￥10 Count -->
                        <span id="yen10CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥10 Total -->
                        <span id="yen10TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥50 Row -->
                    <div id="yen50" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen50MinusButton" class="minusButton">-</button>
                        <!-- ￥50 image -->
                        <img src="images/currency/yen50.jpg" alt="￥50" />
                        
                        <!-- Plus Button -->
                        <button id="yen50PlusButton" class="plusButton">+</button>
                        <!-- ￥50 Count -->
                        <span id="yen50CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥50 Total -->
                        <span id="yen50TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥100 Row -->
                    <div id="yen100" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen100MinusButton" class="minusButton">-</button>
                        <!-- ￥100 image -->
                        <img src="images/currency/yen100.jpg" alt="￥100" />
                        
                        <!-- Plus Button -->
                        <button id="yen100PlusButton" class="plusButton">+</button>
                        <!-- ￥100 Count -->
                        <span id="yen100CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥100 Total -->
                        <span id="yen100TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥500 Row -->
                    <div id="yen500" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen500MinusButton" class="minusButton">-</button>
                        <!-- ￥500 image -->
                        <img src="images/currency/yen500.jpg" alt="￥500" />
                        
                        <!-- Plus Button -->
                        <button id="yen500PlusButton" class="plusButton">+</button>
                        <!-- ￥500 Count -->
                        <span id="yen500CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥500 Total -->
                        <span id="yen500TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥1000 Row -->
                    <div id="yen1000" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen1000MinusButton" class="minusButton">-</button>
                        <!-- ￥1000 image -->
                        <img src="images/currency/yen1000.jpg" alt="￥1000" class="squareImg" />
                        
                        <!-- Plus Button -->
                        <button id="yen1000PlusButton" class="plusButton">+</button>
                        <!-- ￥1000 Count -->
                        <span id="yen1000CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥1000 Total -->
                        <span id="yen1000TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥5000 Row -->
                    <div id="yen5000" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen5000MinusButton" class="minusButton">-</button>
                        <!-- ￥5000 image -->
                        <img src="images/currency/yen5000.jpg" alt="￥5000" class="squareImg" />
                        
                        <!-- Plus Button -->
                        <button id="yen5000PlusButton" class="plusButton">+</button>
                        <!-- ￥5000 Count -->
                        <span id="yen5000CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥5000 Total -->
                        <span id="yen5000TotalValueContainer" class="currencyTotal">0</span>
                    </div>

                    <!-- ￥10000 Row -->
                    <div id="yen10000" class="currencyRow">
                        <!-- Minus Button -->
                        <button id="yen10000MinusButton" class="minusButton">-</button>
                        <!-- ￥10000 image -->
                        <img src="images/currency/yen10000.jpg" alt="￥10000" class="squareImg" />
                        
                        <!-- Plus Button -->
                        <button id="yen10000PlusButton" class="plusButton">+</button>
                        <!-- ￥10000 Count -->
                        <span id="yen10000CountContainer" class="currencyCountContainer">0</span>
                        <!-- ￥10000 Total -->
                        <span id="yen10000TotalValueContainer" class="currencyTotal">0</span>
                    </div>
                                    
                </div>
            </div>
        </main>
        <!-- <script src="./js/counter.js"></script> -->
        <script>
            //
//  Currency Object Template
// 
const currency = {
    // currency Properties
    baseValue: 0,
    count: 0,
    // Total cumulative value based on current count
    totalValue: 0,
    countContainer: 0,
    totalValueContainer: 0,

    // currency Methods

    // Update total values for this currency and the overall total.
    updateTotals() {
        // Set this currency's new total value
        this.totalValue = (this.count * this.baseValue);
        // Calculate and set new total value for all currencies combined

        overallTotalValue = 0;
        for (i = 0; i < allCurrencies.length; i++) {
            overallTotalValue = overallTotalValue + allCurrencies[i].totalValue;
        }
    },

    // Display values for this currency and total
    displayTotals() {
        // Display new count value for this currency
        this.countContainer.innerText = this.count;
        // Display new total for this currency
        this.totalValueContainer.innerText = this.totalValue;
        // Display new overall total
        document.getElementById("totalValueContainer").innerText = `Total: ￥${overallTotalValue}`;
    },

    // Increment currency count up by 1
    increment() {
        // Increase by 1
        this.count = this.count + 1;
        // Update and display totals
        this.updateTotals();
        this.displayTotals();
    },

    // Decrement currency count down by 1
    decrement() {
        // Decrease by 1
        this.count = this.count - 1;
        // Make sure it's not below 0
        if(this.count < 0) {
            this.count = 0;
        };
        // Update and display totals
        this.updateTotals();
        this.displayTotals();
    },

    // Clear total values and update display
    clear() {
        // Set to 0
        this.count = 0;
        this.updateTotals();
        this.displayTotals();
    }
};

// 
// Create Currency objects
// 

// Array for all currency values
const currencyValues = [1, 5, 10, 50, 100, 500, 1000, 5000, 10000];

// Initialize array for storing all the currency objects.
let allCurrencies = [];

// Function for creating currency objects
function createCurrency(value) {
    let myString = `Yen${value}`;
    // let newCurrency = eval(myString = Object.create(currency));
    let newCurrency = Object.create(currency);
    newCurrency.baseValue = value;
    newCurrency.count = 0;
    newCurrency.totalValue = 0;
    newCurrency.countContainer = document.getElementById(`yen${value}CountContainer`)
    newCurrency.totalValueContainer = document.getElementById(`yen${value}TotalValueContainer`)
    // Create event listener for the plus button for this currency
    document.getElementById(`yen${value}PlusButton`).addEventListener("click", function() {
        newCurrency.increment();
    });
    // Create event listener for the minus button for this currency
    document.getElementById(`yen${value}MinusButton`).addEventListener("click", function() {
        newCurrency.decrement();
    });
    allCurrencies.push(newCurrency);
}

// Loop for creating all the currencies
for (var i = 0; i < currencyValues.length; i++) {
    let currentValue = currencyValues[i];
    let newCurrency = createCurrency(currentValue);
}

//
// Other Variables/Events
// 

// Total Value for all currency types
let overallTotalValue = 0;

// Clear Button
let clearButton = document.getElementById("clearButton");

// Clear All click event
clearButton.addEventListener("click", function() {
    overallTotalValue = 0;
    for (var i = 0; i < allCurrencies.length; i++) {
        allCurrencies[i].clear();
    }
});

// document.getElementById("clearButton").innerText = "JS Test"
        </script>
    </body>
</html>
